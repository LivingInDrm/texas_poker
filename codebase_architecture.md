# Texas Poker æ¸¸æˆä»£ç åº“æ¶æ„æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäºç°ä»£WebæŠ€æœ¯æ ˆçš„åœ¨çº¿å¾·å·æ‰‘å…‹æ¸¸æˆï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå¤šäººå®æ—¶å¯¹æˆ˜ã€‚é¡¹ç›®å·²å®Œæˆæ ¸å¿ƒåŠŸèƒ½å¼€å‘ï¼ŒåŒ…æ‹¬ç”¨æˆ·ç³»ç»Ÿã€æˆ¿é—´ç®¡ç†ã€å®Œæ•´çš„æ¸¸æˆé€»è¾‘å¼•æ“ã€WebSocketå®æ—¶é€šä¿¡ã€UIç»„ä»¶ç­‰ï¼Œç›®å‰å·²è¿›å…¥åæœŸå®Œå–„å’Œä¼˜åŒ–é˜¶æ®µã€‚

---

## 1. é¡¹ç›®ç»“æ„æ¦‚è§ˆ

```
/Users/xiaochunliu/texas_poker/
â”œâ”€â”€ ğŸ“ backend/                    # åç«¯æœåŠ¡ (Node.js + Express + TypeScript)
â”œâ”€â”€ ğŸ“ frontend/                   # å‰ç«¯åº”ç”¨ (React + Vite + TypeScript)
â”œâ”€â”€ ğŸ“„ docker-compose.yml          # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ ğŸ“„ plan.md                     # è¯¦ç»†å¼€å‘è®¡åˆ’å’Œè¿›åº¦è¿½è¸ª
â”œâ”€â”€ ğŸ“„ texas_poker_product_design.md  # äº§å“è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ texas_poker_tech_design.md    # æŠ€æœ¯è®¾è®¡æ–‡æ¡£
â””â”€â”€ ğŸ“„ CLAUDE.md                   # å¼€å‘æŒ‡å—å’Œè¯´æ˜
```

---

## 2. åç«¯æ¶æ„ (Backend)

### 2.1 æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Node.js + Express + TypeScript
- **å®æ—¶é€šä¿¡**: Socket.IO (WebSocket)
- **æ•°æ®åº“**: PostgreSQL (ä¸»æ•°æ®åº“) + Redis (ç¼“å­˜/ä¼šè¯)
- **ORM**: Prisma (ç±»å‹å®‰å…¨çš„æ•°æ®åº“å®¢æˆ·ç«¯)
- **è®¤è¯**: JWT + bcrypt
- **æµ‹è¯•**: Jest + ts-jest
- **éƒ¨ç½²**: Docker + Docker Compose

### 2.2 ç›®å½•ç»“æ„
```
backend/
â”œâ”€â”€ ğŸ“ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“„ index.ts                # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ db.ts                   # æ•°æ®åº“è¿æ¥é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ prisma.ts               # Prismaå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ ğŸ“„ healthcheck.ts          # å¥åº·æ£€æŸ¥ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ğŸ“ routes/                 # APIè·¯ç”±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth.ts             # è®¤è¯ç›¸å…³API
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ user.ts             # ç”¨æˆ·ç›¸å…³API
â”‚   â”‚   â””â”€â”€ ğŸ“„ room.ts             # æˆ¿é—´ç›¸å…³API
â”‚   â”œâ”€â”€ ğŸ“ middleware/             # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“„ auth.ts             # JWTè®¤è¯ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ ğŸ“ socket/                 # WebSocketé€šä¿¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ socketServer.ts     # Socket.IOæœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“ handlers/           # Socketäº‹ä»¶å¤„ç†å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ gameHandlers.ts # æ¸¸æˆç›¸å…³äº‹ä»¶å¤„ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ roomHandlers.ts # æˆ¿é—´ç›¸å…³äº‹ä»¶å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“„ systemHandlers.ts # ç³»ç»Ÿäº‹ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ ğŸ“ middleware/         # Socketä¸­é—´ä»¶
â”‚   â”‚       â””â”€â”€ ğŸ“„ validation.ts  # Socketæ¶ˆæ¯éªŒè¯
â”‚   â”œâ”€â”€ ğŸ“ game/                   # æ¸¸æˆé€»è¾‘å¼•æ“
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Card.ts             # æ‰‘å…‹ç‰ŒåŸºç¡€ç±»
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Deck.ts             # ç‰Œå †ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GameState.ts        # æ¸¸æˆçŠ¶æ€ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ HandRank.ts         # ç‰Œå‹åˆ¤æ–­å’Œæ¯”ç‰Œç®—æ³•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PotManager.ts       # ç­¹ç æ± ç®¡ç†
â”‚   â”‚   â””â”€â”€ ğŸ“„ PositionManager.ts  # ä½ç½®ç®¡ç†
â”‚   â””â”€â”€ ğŸ“ types/                  # ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ ğŸ“„ express.d.ts        # Expressç±»å‹æ‰©å±•
â”‚       â””â”€â”€ ğŸ“„ socket.ts           # Socket.IOç±»å‹å®šä¹‰
â”œâ”€â”€ ğŸ“ tests/                      # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“ game/                   # æ¸¸æˆé€»è¾‘æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Card.test.ts        # æ‰‘å…‹ç‰Œæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Deck.test.ts        # ç‰Œå †æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GameState.test.ts   # æ¸¸æˆçŠ¶æ€æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GameFlow.test.ts    # æ¸¸æˆæµç¨‹é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ HandRank.test.ts    # ç‰Œå‹åˆ¤æ–­æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PotManager.test.ts  # ç­¹ç æ± æµ‹è¯•
â”‚   â”‚   â””â”€â”€ ğŸ“„ PositionManager.test.ts  # ä½ç½®ç®¡ç†æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“ socket/                 # Socketé€šä¿¡æµ‹è¯•
â”‚       â”œâ”€â”€ ğŸ“„ socketServer.test.ts # SocketæœåŠ¡å™¨æµ‹è¯•
â”‚       â”œâ”€â”€ ğŸ“„ validation.test.ts  # æ¶ˆæ¯éªŒè¯æµ‹è¯•
â”‚       â””â”€â”€ ğŸ“„ validation.simple.test.ts # ç®€å•éªŒè¯æµ‹è¯•
â”œâ”€â”€ ğŸ“ prisma/                     # Prismaé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ schema.prisma           # æ•°æ®åº“æ¨¡å‹å®šä¹‰
â”‚   â””â”€â”€ ğŸ“ migrations/             # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ package.json                # ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ tsconfig.json               # TypeScripté…ç½®
â”œâ”€â”€ ğŸ“„ jest.config.js              # Jestæµ‹è¯•é…ç½®
â””â”€â”€ ğŸ“„ Dockerfile                  # Dockeræ„å»ºé…ç½®
```

### 2.3 æ ¸å¿ƒAPIç«¯ç‚¹
```typescript
// è®¤è¯ç›¸å…³
POST /api/auth/register            # ç”¨æˆ·æ³¨å†Œ
POST /api/auth/login               # ç”¨æˆ·ç™»å½•

// ç”¨æˆ·ç›¸å…³
GET /api/user/me                   # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

// æˆ¿é—´ç›¸å…³
POST /api/room/create              # åˆ›å»ºæˆ¿é—´
GET /api/room/list                 # è·å–æˆ¿é—´åˆ—è¡¨
POST /api/room/join                # åŠ å…¥æˆ¿é—´
DELETE /api/room/:id               # è§£æ•£æˆ¿é—´

// ç³»ç»Ÿç›‘æ§
GET /api/health                    # å¥åº·æ£€æŸ¥
GET /api/test/prisma               # Prismaè¿æ¥æµ‹è¯•

// å¥åº·æ£€æŸ¥ç³»ç»Ÿ
backend/src/healthcheck.ts         # ç‹¬ç«‹å¥åº·æ£€æŸ¥è„šæœ¬
```

### 2.4 æ•°æ®åº“æ¨¡å‹
```typescript
// ç”¨æˆ·è¡¨ (users)
model User {
  id: UUID                         # ç”¨æˆ·ID
  username: String                 # ç”¨æˆ·å
  passwordHash: String             # å¯†ç å“ˆå¸Œ
  avatar?: String                  # å¤´åƒURL
  chips: Int                       # ç­¹ç æ•°é‡
  gamesPlayed: Int                 # æ¸¸æˆåœºæ¬¡
  winRate: Float                   # èƒœç‡
}

// æˆ¿é—´è¡¨ (rooms)
model Room {
  id: UUID                         # æˆ¿é—´ID
  ownerId: UUID                    # åˆ›å»ºè€…ID
  playerLimit: Int                 # æœ€å¤§ç©å®¶æ•°
  password?: String                # æˆ¿é—´å¯†ç 
  status: RoomStatus               # æˆ¿é—´çŠ¶æ€
  bigBlind: Int                    # å¤§ç›²æ³¨
  smallBlind: Int                  # å°ç›²æ³¨
}

// æ¸¸æˆè®°å½•è¡¨ (game_records)
model GameRecord {
  id: UUID                         # è®°å½•ID
  roomId: UUID                     # æˆ¿é—´ID
  userId: UUID                     # ç”¨æˆ·ID
  chipsBefore: Int                 # æ¸¸æˆå‰ç­¹ç 
  chipsAfter: Int                  # æ¸¸æˆåç­¹ç 
  chipsChange: Int                 # ç­¹ç å˜åŒ–
  handResult?: String              # ç‰Œå‹ç»“æœ
  isWinner: Boolean                # æ˜¯å¦è·èƒœ
  gameData?: Json                  # æ¸¸æˆè¯¦ç»†æ•°æ®
}
```

### 2.5 å¥åº·æ£€æŸ¥ç³»ç»Ÿ âœ¨ **NEW**
ç‹¬ç«‹çš„å¥åº·æ£€æŸ¥ç³»ç»Ÿï¼Œç”¨äºç›‘æ§ç³»ç»ŸçŠ¶æ€å’Œä¾èµ–æœåŠ¡ï¼š

**åŠŸèƒ½ç‰¹æ€§**:
- **æ•°æ®åº“æ£€æŸ¥**: éªŒè¯PostgreSQLè¿æ¥çŠ¶æ€
- **ç¼“å­˜æ£€æŸ¥**: éªŒè¯Redisè¿æ¥å’Œå“åº”èƒ½åŠ›
- **ç‹¬ç«‹è¿è¡Œ**: å¯ä½œä¸ºç‹¬ç«‹è„šæœ¬æ‰§è¡Œï¼Œä¸ä¾èµ–ä¸»æœåŠ¡
- **Dockerå‹å¥½**: é€‚ç”¨äºå®¹å™¨åŒ–ç¯å¢ƒçš„å¥åº·æ£€æŸ¥

**å®ç°ç»†èŠ‚**:
```typescript
// backend/src/healthcheck.ts
async function healthCheck() {
  // æ£€æŸ¥PostgreSQLè¿æ¥
  await prisma.$queryRaw`SELECT 1`;
  
  // æ£€æŸ¥Redisè¿æ¥
  const redis = createConnection();
  await redis.ping();
  await redis.disconnect();
}
```

**ä½¿ç”¨åœºæ™¯**:
- å®¹å™¨å¯åŠ¨æ£€æŸ¥
- ç³»ç»Ÿç›‘æ§é›†æˆ
- æ•…éšœè¯Šæ–­å’Œæ’é™¤
- CI/CDæµç¨‹éªŒè¯

### 2.6 æ¸¸æˆé€»è¾‘å¼•æ“
å¾·å·æ‰‘å…‹æ¸¸æˆé€»è¾‘å®Œå…¨ç”±åç«¯ç®¡ç†ï¼ŒåŒ…å«ä»¥ä¸‹æ ¸å¿ƒæ¨¡å—ï¼š

- **Card.ts**: æ‰‘å…‹ç‰ŒåŸºç¡€ç±»ï¼Œå®šä¹‰ç‰Œçš„èŠ±è‰²å’Œç‚¹æ•°
- **Deck.ts**: ç‰Œå †ç®¡ç†ï¼ŒåŒ…æ‹¬æ´—ç‰Œã€å‘ç‰Œç­‰æ“ä½œ
- **HandRank.ts**: ç‰Œå‹åˆ¤æ–­ç®—æ³•ï¼Œæ”¯æŒæ‰€æœ‰å¾·å·æ‰‘å…‹ç‰Œå‹
- **PotManager.ts**: ç­¹ç æ± ç®¡ç†ï¼Œæ”¯æŒä¸»æ± å’Œè¾¹æ± è®¡ç®—
- **PositionManager.ts**: ä½ç½®ç®¡ç†ï¼Œå¤„ç†åº„å®¶ã€ç›²æ³¨ä½ç½®è½®è½¬
- **GameState.ts**: æ¸¸æˆçŠ¶æ€ç®¡ç†å™¨ï¼Œæ ¸å¿ƒæ¸¸æˆé€»è¾‘å¼•æ“

---

## 3. å‰ç«¯æ¶æ„ (Frontend)

### 3.1 æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 19 + TypeScript
- **æ„å»ºå·¥å…·**: Vite 6
- **çŠ¶æ€ç®¡ç†**: Zustand
- **è·¯ç”±**: React Router DOM 7
- **UIæ ·å¼**: Tailwind CSS 4
- **å›¾æ ‡åº“**: Lucide React
- **HTTPå®¢æˆ·ç«¯**: Axios
- **å®æ—¶é€šä¿¡**: Socket.IO Client
- **æµ‹è¯•**: Vitest + React Testing Library

### 3.2 ç›®å½•ç»“æ„
```
frontend/
â”œâ”€â”€ ğŸ“ src/                        # æºä»£ç 
â”‚   â”œâ”€â”€ ğŸ“„ main.tsx                # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ ğŸ“„ App.tsx                 # æ ¹ç»„ä»¶å’Œè·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ pages/                  # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ LoginPage.tsx       # ç™»å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ LobbyPage.tsx       # å¤§å…é¡µé¢
â”‚   â”‚   â””â”€â”€ ğŸ“„ GamePage.tsx        # æ¸¸æˆé¡µé¢
â”‚   â”œâ”€â”€ ğŸ“ components/             # UIç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GameTable.tsx       # æ¸¸æˆæ¡Œé¢ä¸»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PlayerSeat.tsx      # ç©å®¶åº§ä½ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PokerCards.tsx      # æ‰‘å…‹ç‰Œç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PotDisplay.tsx      # ç­¹ç æ± æ˜¾ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ActionPanel.tsx     # æ“ä½œé¢æ¿ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ActionHistory.tsx   # æ“ä½œå†å²ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ResultModal.tsx     # ç»“ç®—å¼¹çª—ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ WinnerHighlight.tsx # èƒœè€…é«˜äº®å’ŒåŠ¨ç”»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ HandReveal.tsx      # æ‰‹ç‰Œå±•ç¤ºç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GameEffects.tsx     # éŸ³æ•ˆå’Œè§†è§‰åé¦ˆç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ RoomList.tsx        # æˆ¿é—´åˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ CreateRoomModal.tsx # åˆ›å»ºæˆ¿é—´å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ JoinRoomModal.tsx   # åŠ å…¥æˆ¿é—´å¼¹çª—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ProtectedRoute.tsx  # è·¯ç”±ä¿æŠ¤ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ AnimatedCard.tsx    # å‘ç‰ŒåŠ¨ç”»ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ NetworkIndicator.tsx # ç½‘ç»œçŠ¶æ€æŒ‡ç¤ºå™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ OfflinePlayerIndicator.tsx # ç¦»çº¿ç©å®¶æŒ‡ç¤ºå™¨
â”‚   â”‚   â””â”€â”€ ğŸ“„ ReconnectionHandler.tsx # é‡è¿å¤„ç†ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ components/__tests__/   # ç»„ä»¶æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ GameTable.test.tsx  # æ¸¸æˆæ¡Œé¢æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PlayerSeat.test.tsx # ç©å®¶åº§ä½æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PokerCards.test.tsx # æ‰‘å…‹ç‰Œæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ PotDisplay.test.tsx # ç­¹ç æ± æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ActionPanel.test.tsx # æ“ä½œé¢æ¿æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ActionHistory.test.tsx # æ“ä½œå†å²æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ ResultModal.test.tsx # ç»“ç®—å¼¹çª—æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ WinnerHighlight.test.tsx # èƒœè€…é«˜äº®æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ HandReveal.test.tsx # æ‰‹ç‰Œå±•ç¤ºæµ‹è¯•
â”‚   â”‚   â””â”€â”€ ğŸ“„ GameEffects.test.tsx # éŸ³æ•ˆå’Œè§†è§‰åé¦ˆæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ stores/                 # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ userStore.ts        # ç”¨æˆ·çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ roomStore.ts        # æˆ¿é—´çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ ğŸ“„ gameStore.ts        # æ¸¸æˆçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“ hooks/                  # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ useSocket.ts        # Socketè¿æ¥Hook
â”‚   â”‚   â””â”€â”€ ğŸ“ __tests__/          # Hooksæµ‹è¯•
â”‚   â”‚       â””â”€â”€ ğŸ“„ useSocket.test.tsx
â”‚   â”œâ”€â”€ ğŸ“ services/               # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ api.ts              # HTTP APIå®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ socketService.ts    # Socket.IOå®¢æˆ·ç«¯æœåŠ¡
â”‚   â”‚   â””â”€â”€ ğŸ“ __tests__/          # æœåŠ¡æµ‹è¯•
â”‚   â”‚       â””â”€â”€ ğŸ“„ socketService.test.ts
â”‚   â”œâ”€â”€ ğŸ“ types/                  # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ game.ts             # æ¸¸æˆç›¸å…³ç±»å‹
â”‚   â”‚   â””â”€â”€ ğŸ“„ socket.ts           # Socketé€šä¿¡ç±»å‹
â”‚   â”œâ”€â”€ ğŸ“ test/                   # æµ‹è¯•é…ç½®
â”‚   â”‚   â””â”€â”€ ğŸ“„ setup.ts            # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ index.css               # å…¨å±€æ ·å¼
â”‚   â””â”€â”€ ğŸ“„ vite-env.d.ts           # Viteç±»å‹å£°æ˜
â”œâ”€â”€ ğŸ“ public/                     # é™æ€èµ„æº
â”œâ”€â”€ ğŸ“„ package.json                # ä¾èµ–é…ç½®
â”œâ”€â”€ ğŸ“„ vite.config.ts              # Viteé…ç½®
â”œâ”€â”€ ğŸ“„ vitest.config.ts            # Vitestæµ‹è¯•é…ç½®
â”œâ”€â”€ ğŸ“„ tailwind.config.js          # Tailwind CSSé…ç½®
â”œâ”€â”€ ğŸ“„ tsconfig.json               # TypeScripté…ç½®
â””â”€â”€ ğŸ“„ Dockerfile                  # Dockeræ„å»ºé…ç½®
```

### 3.3 è·¯ç”±æ¶æ„
```typescript
// è·¯ç”±é…ç½®
Routes:
  /login                           # ç™»å½•é¡µé¢ (å…¬å¼€)
  /lobby                           # å¤§å…é¡µé¢ (éœ€è®¤è¯)
  /game/:roomId                    # æ¸¸æˆé¡µé¢ (éœ€è®¤è¯)
  /                               # é‡å®šå‘åˆ° /lobby
  /*                              # é‡å®šå‘åˆ° /lobby
```

### 3.4 çŠ¶æ€ç®¡ç†æ¶æ„
```typescript
// ç”¨æˆ·çŠ¶æ€ (userStore.ts)
interface UserState {
  user: User | null;               # å½“å‰ç”¨æˆ·ä¿¡æ¯
  token: string | null;            # JWTä»¤ç‰Œ
  isAuthenticated: boolean;        # è®¤è¯çŠ¶æ€
  isLoading: boolean;              # åŠ è½½çŠ¶æ€
  error: string | null;            # é”™è¯¯ä¿¡æ¯
}

// æˆ¿é—´çŠ¶æ€ (roomStore.ts)
interface RoomState {
  rooms: Room[];                   # æˆ¿é—´åˆ—è¡¨
  currentRoom: Room | null;        # å½“å‰æˆ¿é—´
  isLoading: boolean;              # åŠ è½½çŠ¶æ€
  error: string | null;            # é”™è¯¯ä¿¡æ¯
}

// æ¸¸æˆçŠ¶æ€ (gameStore.ts)
interface GameStoreState {
  currentRoom: RoomState | null;   # æˆ¿é—´çŠ¶æ€
  gameState: GameState | null;     # æ¸¸æˆçŠ¶æ€
  gameResults: GameResult[] | null; # æ¸¸æˆç»“æœ
  isInGame: boolean;               # æ˜¯å¦åœ¨æ¸¸æˆä¸­
  isGameStarted: boolean;          # æ¸¸æˆæ˜¯å¦å¼€å§‹
  isMyTurn: boolean;               # æ˜¯å¦è½®åˆ°æˆ‘
  currentPlayerId: string | null;  # å½“å‰è¡ŒåŠ¨ç©å®¶ID
  recentActions: PlayerAction[];   # æœ€è¿‘çš„ç©å®¶è¡ŒåŠ¨
}
```

### 3.5 æ ¸å¿ƒç»„ä»¶è¯´æ˜

#### GameTable.tsx - æ¸¸æˆæ¡Œé¢ç»„ä»¶
- æ”¯æŒ2-9äººæ¸¸æˆæ¡Œé¢å¸ƒå±€
- æ¤­åœ†å½¢åº§ä½æ’åˆ—ç®—æ³•
- å®æ—¶æ¸¸æˆçŠ¶æ€æ˜¾ç¤º
- ç©å®¶æ“ä½œå€’è®¡æ—¶
- å“åº”å¼è®¾è®¡

#### PlayerSeat.tsx - ç©å®¶åº§ä½ç»„ä»¶
- ç©å®¶ä¿¡æ¯æ˜¾ç¤ºï¼ˆå¤´åƒã€æ˜µç§°ã€ç­¹ç ï¼‰
- ç©å®¶çŠ¶æ€æŒ‡ç¤ºï¼ˆæ´»è·ƒã€å¼ƒç‰Œã€å…¨ä¸‹ã€æš‚ç¦»ï¼‰
- ä½ç½®æ ‡è¯†ï¼ˆåº„å®¶Dã€å°ç›²SBã€å¤§ç›²BBï¼‰
- å½“å‰è¡ŒåŠ¨ç©å®¶é«˜äº®

#### PokerCards.tsx - æ‰‘å…‹ç‰Œç»„ä»¶
- å¤šç§å°ºå¯¸æ”¯æŒï¼ˆå°ã€ä¸­ã€å¤§ï¼‰
- æ­£é¢/èƒŒé¢æ˜¾ç¤ºåˆ‡æ¢
- ç‰Œå‹é«˜äº®æ˜¾ç¤º
- CSSåŠ¨ç”»æ•ˆæœ

#### ActionPanel.tsx - æ“ä½œé¢æ¿ç»„ä»¶
- æ™ºèƒ½æ“ä½œé€‰é¡¹ï¼ˆæ ¹æ®æ¸¸æˆçŠ¶æ€åŠ¨æ€æ˜¾ç¤ºï¼‰
- åŠ æ³¨æ»‘æ¡å’Œæ•°å­—è¾“å…¥
- å¿«æ·åŠ æ³¨æŒ‰é’®ï¼ˆæœ€å°ã€1/2æ± ã€3/4æ± ã€å…¨ä¸‹ï¼‰
- æ“ä½œç¡®è®¤å’Œæ’¤é”€æœºåˆ¶

#### ResultModal.tsx - ç»“ç®—å¼¹çª—ç»„ä»¶
- èƒœè€…ä¿¡æ¯å±•ç¤ºå’Œæ’åº
- ç‰Œå‹å¯¹æ¯”å’Œè¯´æ˜
- ç­¹ç å˜åŠ¨ç»Ÿè®¡å’Œå¥–æ± åˆ†é…
- å†æ¥ä¸€å±€å’Œè¿”å›å¤§å…åŠŸèƒ½

#### WinnerHighlight.tsx - èƒœè€…é«˜äº®å’ŒåŠ¨ç”»ç»„ä»¶
- èƒœè€…é—ªå…‰é«˜äº®æ•ˆæœ
- ç­¹ç åˆ†é…åŠ¨ç”»åºåˆ—
- æ¸è¿›å¼åŠ¨ç”»æ’­æ”¾

#### HandReveal.tsx - æ‰‹ç‰Œå±•ç¤ºç»„ä»¶
- é€å¼ ç¿»ç‰ŒåŠ¨ç”»
- ç‰Œå‹è¯†åˆ«å’Œè¯´æ˜
- å¤šäººæ‰‹ç‰Œå¯¹æ¯”å’Œèƒœè€…æ ‡è¯†

#### GameEffects.tsx - éŸ³æ•ˆå’Œè§†è§‰åé¦ˆç»„ä»¶
- Web Audio API éŸ³æ•ˆç³»ç»Ÿ
- ç²’å­ç‰¹æ•ˆå’Œé—ªå…‰æ•ˆæœ
- åº†ç¥åŠ¨ç”»ï¼ˆçƒŸèŠ±ã€éœ‡åŠ¨ç­‰ï¼‰
- éŸ³æ•ˆæ§åˆ¶å¼€å…³

---

## 4. æ•°æ®åº“æ¶æ„

### 4.1 PostgreSQL ä¸»æ•°æ®åº“
- **ç”¨æˆ·æ•°æ®**: ç”¨æˆ·è´¦æˆ·ã€ç­¹ç ã€ç»Ÿè®¡ä¿¡æ¯
- **æˆ¿é—´æ•°æ®**: æˆ¿é—´é…ç½®ã€çŠ¶æ€æŒä¹…åŒ–
- **æ¸¸æˆè®°å½•**: å†å²æ¸¸æˆæ•°æ®ã€ç»“æœç»Ÿè®¡

### 4.2 Redis ç¼“å­˜æ•°æ®åº“
- **æˆ¿é—´çŠ¶æ€**: å®æ—¶æ¸¸æˆçŠ¶æ€ã€ç©å®¶ä¿¡æ¯
- **ç”¨æˆ·ä¼šè¯**: JWTä»¤ç‰Œã€åœ¨çº¿çŠ¶æ€
- **ä¸´æ—¶æ•°æ®**: æ¸¸æˆè¿‡ç¨‹ä¸­çš„ä¸´æ—¶æ•°æ®

---

## 5. æµ‹è¯•æ¶æ„

### 5.1 åç«¯æµ‹è¯• (Jest)
- **å•å…ƒæµ‹è¯•**: 145ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ‰€æœ‰æ¸¸æˆé€»è¾‘
- **æµ‹è¯•è¦†ç›–ç‡**: æ¸¸æˆå¼•æ“100%è¦†ç›–
- **æµ‹è¯•åˆ†ç±»**:
  - æ‰‘å…‹ç‰ŒåŸºç¡€åŠŸèƒ½æµ‹è¯• (Card.test.ts)
  - ç‰Œå‹åˆ¤æ–­å’Œæ¯”ç‰Œç®—æ³•æµ‹è¯• (HandRank.test.ts)
  - ç­¹ç æ± ç®¡ç†æµ‹è¯• (PotManager.test.ts)
  - æ¸¸æˆçŠ¶æ€ç®¡ç†æµ‹è¯• (GameState.test.ts)
  - ä½ç½®ç®¡ç†æµ‹è¯• (PositionManager.test.ts)
  - RedisçŠ¶æ€ç®¡ç†æµ‹è¯• (redis/roomState.test.ts)
  - ç®€åŒ–æµ‹è¯•å¥—ä»¶ (*.simplified.test.ts)

### 5.2 å‰ç«¯æµ‹è¯• (Vitest)
- **ç»„ä»¶æµ‹è¯•**: 145ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–æ‰€æœ‰UIç»„ä»¶
- **æµ‹è¯•å·¥å…·**: React Testing Library + Jest DOM
- **æµ‹è¯•åˆ†ç±»**:
  - æ¸¸æˆæ¡Œé¢ç»„ä»¶æµ‹è¯• (GameTable.test.tsx)
  - ç©å®¶åº§ä½ç»„ä»¶æµ‹è¯• (PlayerSeat.test.tsx)
  - æ‰‘å…‹ç‰Œç»„ä»¶æµ‹è¯• (PokerCards.test.tsx)
  - æ“ä½œé¢æ¿æµ‹è¯• (ActionPanel.test.tsx)
  - ç»“ç®—å¼¹çª—æµ‹è¯• (ResultModal.test.tsx)
  - èƒœè€…é«˜äº®æµ‹è¯• (WinnerHighlight.test.tsx)
  - æ‰‹ç‰Œå±•ç¤ºæµ‹è¯• (HandReveal.test.tsx)
  - éŸ³æ•ˆå’Œè§†è§‰åé¦ˆæµ‹è¯• (GameEffects.test.tsx)
  - å“åº”å¼è®¾è®¡æµ‹è¯• (ResponsiveDesign.test.tsx)
  - ç”¨æˆ·äº¤äº’æµ‹è¯•

### 5.3 ç«¯åˆ°ç«¯æµ‹è¯• (Playwright) âœ¨ **NEW**
- **æµ‹è¯•æ¡†æ¶**: Playwright + TypeScript
- **æµ‹è¯•èŒƒå›´**: å®Œæ•´ç”¨æˆ·æµç¨‹ç«¯åˆ°ç«¯è¦†ç›–
- **æµ‹è¯•ç¯å¢ƒ**: 
  - å‰ç«¯æœåŠ¡: `http://localhost:5173`
  - åç«¯æœåŠ¡: `http://localhost:3001`
  - æµè§ˆå™¨æ”¯æŒ: Chromium (å¯æ‰©å±•Firefox, Safari)

#### 5.3.1 E2Eæµ‹è¯•ç›®å½•ç»“æ„
```
e2e-tests/
â”œâ”€â”€ ğŸ“„ playwright.config.ts          # Playwrighté…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ test_plan.md                  # è¯¦ç»†æµ‹è¯•è®¡åˆ’æ–‡æ¡£
â”œâ”€â”€ ğŸ“ tests/                        # æµ‹è¯•ç”¨ä¾‹ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ auth.spec.ts               # ç”¨æˆ·è®¤è¯æµç¨‹æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ auth-simplified.spec.ts    # ç®€åŒ–è®¤è¯æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ layout-screenshot.spec.ts  # å¸ƒå±€æˆªå›¾æµ‹è¯•
â”‚   â””â”€â”€ ğŸ“„ simple-layout-test.spec.ts # ç®€å•å¸ƒå±€æµ‹è¯•
â”œâ”€â”€ ğŸ“ playwright-report/             # æµ‹è¯•æŠ¥å‘Šç›®å½•
â”œâ”€â”€ ğŸ“„ test-results.json              # æµ‹è¯•ç»“æœæ•°æ®
â””â”€â”€ ğŸ“ test-results/                  # æµ‹è¯•ç»“æœæ–‡ä»¶
```

#### 5.3.2 æµ‹è¯•è¦†ç›–èŒƒå›´
**ğŸ¥‡ æ ¸å¿ƒåŠŸèƒ½æµ‹è¯• (Critical - P0)**
- **ç”¨æˆ·è®¤è¯æµç¨‹**: æ³¨å†Œ/ç™»å½•/æ³¨é”€/è¡¨å•éªŒè¯
- **æˆ¿é—´ç®¡ç†åŠŸèƒ½**: åˆ›å»ºæˆ¿é—´/åŠ å…¥æˆ¿é—´/æˆ¿é—´åˆ—è¡¨/å¿«é€Ÿå¼€å§‹
- **æ¸¸æˆåŸºç¡€æµç¨‹**: æ¸¸æˆå¼€å§‹/ç©å®¶æ“ä½œ/é˜¶æ®µæ¨è¿›/ç»“ç®—åˆ†é…

**ğŸ¥ˆ å®Œæ•´æ¸¸æˆä½“éªŒæµ‹è¯• (High - P1)**
- **å¤šäººæ¸¸æˆåä½œ**: 3-4äººåŒæ—¶æ¸¸æˆ/å¤æ‚æ¸¸æˆåœºæ™¯/æˆ¿é—´åä½œ
- **å®æ—¶é€šä¿¡æµ‹è¯•**: WebSocketè¿æ¥/çŠ¶æ€åŒæ­¥/ç½‘ç»œå¼‚å¸¸å¤„ç†
- **å¤æ‚æ¸¸æˆåœºæ™¯**: å¤šäººå…¨ä¸‹/è¶…æ—¶å¤„ç†/ç©å®¶ç¦»å¼€

**ğŸ¥‰ é«˜çº§åŠŸèƒ½æµ‹è¯• (Medium - P2)**
- **é”™è¯¯å¤„ç†æµ‹è¯•**: å®¢æˆ·ç«¯/æœåŠ¡ç«¯é”™è¯¯/æ•°æ®ä¸€è‡´æ€§
- **ç”¨æˆ·ä½“éªŒæµ‹è¯•**: å“åº”å¼è®¾è®¡/åŠ¨ç”»æ•ˆæœ/æ— éšœç¢è®¿é—®
- **æ€§èƒ½å¹¶å‘æµ‹è¯•**: å•æˆ¿é—´æ€§èƒ½/å¤šæˆ¿é—´å¹¶å‘/å‹åŠ›æµ‹è¯•

#### 5.3.3 Playwrighté…ç½®ç‰¹æ€§
```typescript
// playwright.config.ts å…³é”®é…ç½®
export default defineConfig({
  testDir: './tests',
  fullyParallel: true,                    # å¹¶è¡Œæµ‹è¯•æ‰§è¡Œ
  retries: process.env.CI ? 2 : 0,        # CIç¯å¢ƒé‡è¯•æœºåˆ¶
  workers: process.env.CI ? 1 : undefined, # CIå·¥ä½œçº¿ç¨‹ä¼˜åŒ–
  reporter: 'html',                       # HTMLæµ‹è¯•æŠ¥å‘Š
  use: {
    baseURL: 'http://localhost:5173',     # å‰ç«¯æœåŠ¡åœ°å€
    trace: 'on-first-retry',              # å¤±è´¥æ—¶è®°å½•è½¨è¿¹
  },
  webServer: {                            # è‡ªåŠ¨å¯åŠ¨å¼€å‘æœåŠ¡å™¨
    command: 'cd ../frontend && npm run dev',
    url: 'http://localhost:5173',
    reuseExistingServer: !process.env.CI,
  },
});
```

#### 5.3.4 æµ‹è¯•è´¨é‡æ ‡å‡†
- **P0ç”¨ä¾‹é€šè¿‡ç‡**: 100% (æ ¸å¿ƒåŠŸèƒ½å¿…é¡»å…¨é€šè¿‡)
- **P1ç”¨ä¾‹é€šè¿‡ç‡**: â‰¥95% (é‡è¦åŠŸèƒ½åŸºæœ¬é€šè¿‡)
- **P2ç”¨ä¾‹é€šè¿‡ç‡**: â‰¥85% (é«˜çº§åŠŸèƒ½å¤§éƒ¨åˆ†é€šè¿‡)
- **æ€§èƒ½æŒ‡æ ‡**: å“åº”æ—¶é—´<200ms, çŠ¶æ€åŒæ­¥<100ms
- **å…¼å®¹æ€§**: ä¸»æµæµè§ˆå™¨100%å…¼å®¹

#### 5.3.5 æµ‹è¯•å®æ–½ç­–ç•¥
- **å†’çƒŸæµ‹è¯•**: æ¯æ¬¡ä»£ç æäº¤åæ‰§è¡ŒP0ç”¨ä¾‹
- **å›å½’æµ‹è¯•**: æ¯æ—¥æ‰§è¡Œå®Œæ•´æµ‹è¯•å¥—ä»¶
- **æ€§èƒ½æµ‹è¯•**: æ¯å‘¨æ‰§è¡Œä¸€æ¬¡
- **å…¼å®¹æ€§æµ‹è¯•**: å‘å¸ƒå‰æ‰§è¡Œ
- **è‡ªåŠ¨åŒ–æŠ¥å‘Š**: è¯¦ç»†çš„HTMLæµ‹è¯•æŠ¥å‘Šå’Œå¤±è´¥æˆªå›¾

---

## 6. å¼€å‘å·¥ä½œæµç¨‹ âœ¨ **NEW**

### 6.1 å¼€å‘ç¯å¢ƒç®¡ç†
é¡¹ç›®æä¾›äº†å¢å¼ºçš„å¼€å‘ä½“éªŒï¼ŒåŒ…æ‹¬è‡ªåŠ¨åŒ–è¿›ç¨‹ç®¡ç†å’Œæ—¥å¿—ç³»ç»Ÿï¼š

#### 6.1.1 è¿›ç¨‹ç®¡ç†æ–‡ä»¶
```
/Users/xiaochunliu/texas_poker/
â”œâ”€â”€ ğŸ“„ .backend.pid                # åç«¯æœåŠ¡è¿›ç¨‹IDæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ .frontend.pid               # å‰ç«¯æœåŠ¡è¿›ç¨‹IDæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ backend_dev.log             # åç«¯å¼€å‘æ—¥å¿—
â””â”€â”€ ğŸ“„ frontend_dev.log            # å‰ç«¯å¼€å‘æ—¥å¿—
```

**åŠŸèƒ½ç‰¹æ€§**:
- **è¿›ç¨‹è·Ÿè¸ª**: è‡ªåŠ¨è®°å½•å’Œç®¡ç†å¼€å‘æœåŠ¡å™¨è¿›ç¨‹
- **æ—¥å¿—åˆ†ç¦»**: å‰åç«¯æ—¥å¿—ç‹¬ç«‹è®°å½•ï¼Œä¾¿äºè°ƒè¯•
- **å¼€å‘å‹å¥½**: æ”¯æŒè¿›ç¨‹é‡å¯å’ŒçŠ¶æ€ç›‘æ§
- **Gitå¿½ç•¥**: PIDæ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶å·²é…ç½®ä¸ºGitå¿½ç•¥

#### 6.1.2 å¼€å‘æ—¥å¿—ç³»ç»Ÿ
**åç«¯æ—¥å¿— (backend_dev.log)**:
- æœåŠ¡å™¨å¯åŠ¨/å…³é—­ä¿¡æ¯
- APIè¯·æ±‚å’Œå“åº”æ—¥å¿—
- æ•°æ®åº“è¿æ¥çŠ¶æ€
- WebSocketè¿æ¥äº‹ä»¶
- é”™è¯¯å’Œå¼‚å¸¸è®°å½•

**å‰ç«¯æ—¥å¿— (frontend_dev.log)**:
- æ„å»ºè¿‡ç¨‹ä¿¡æ¯
- çƒ­é‡è½½äº‹ä»¶
- ä»£ç æ›´æ–°é€šçŸ¥
- æ„å»ºé”™è¯¯å’Œè­¦å‘Š

#### 6.1.3 å¼€å‘å¯åŠ¨æµç¨‹
```bash
# ä¼ ç»Ÿæ–¹å¼
docker-compose up -d   # å¯åŠ¨æ•°æ®åº“æœåŠ¡
./dev-local.sh stop #åœæ­¢åŸæœ‰æœåŠ¡
./dev-local.sh start #å¯åŠ¨æ–°æœåŠ¡


```


### 6.2 å¼€å‘å·¥å…·é›†æˆ
- **å®æ—¶é‡è½½**: å‰åç«¯ä»£ç ä¿®æ”¹è‡ªåŠ¨é‡å¯
- **ç±»å‹æ£€æŸ¥**: TypeScriptå®æ—¶ç±»å‹éªŒè¯
- **ä»£ç æ ¼å¼åŒ–**: ESLint + Prettierè‡ªåŠ¨æ ¼å¼åŒ–
- **æµ‹è¯•é›†æˆ**: å¼€å‘è¿‡ç¨‹ä¸­å®æ—¶æµ‹è¯•åé¦ˆ

---

## 7. é…ç½®æ–‡ä»¶å’Œå·¥å…·é“¾

### 7.1 Docker é…ç½®
```yaml
# docker-compose.yml
services:
  postgres:        # PostgreSQL 15 æ•°æ®åº“
  redis:           # Redis 7 ç¼“å­˜
  backend:         # Node.js åç«¯æœåŠ¡
  frontend:        # React å‰ç«¯åº”ç”¨
```

### 7.2 å¼€å‘å·¥å…·é…ç½®
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥
- **Prettier**: ä»£ç æ ¼å¼åŒ–
- **TypeScript**: ç±»å‹å®‰å…¨
- **Tailwind CSS**: æ ·å¼æ¡†æ¶
- **Prisma**: æ•°æ®åº“å·¥å…·é“¾

---

## 8. å·²å®ç°åŠŸèƒ½æ€»ç»“

### 8.1 å®Œæˆçš„åŠŸèƒ½æ¨¡å—
1. **åŸºç¡€æ¶æ„** âœ… (100%)
   - å‰åç«¯é¡¹ç›®æ­å»º
   - æ•°æ®åº“è¿æ¥å’Œé…ç½®
   - Dockerç¯å¢ƒé…ç½®

2. **ç”¨æˆ·ç³»ç»Ÿ** âœ… (100%)
   - ç”¨æˆ·æ³¨å†Œ/ç™»å½•
   - JWTè®¤è¯
   - ç”¨æˆ·çŠ¶æ€ç®¡ç†

3. **æˆ¿é—´ç³»ç»Ÿ** âœ… (100%)
   - æˆ¿é—´åˆ›å»º/åŠ å…¥/è§£æ•£
   - æˆ¿é—´åˆ—è¡¨æ˜¾ç¤º
   - å¤§å…é¡µé¢å®Œæ•´å®ç°

4. **æ¸¸æˆé€»è¾‘** âœ… (100%)
   - å®Œæ•´çš„å¾·å·æ‰‘å…‹æ¸¸æˆå¼•æ“
   - ç‰Œå‹åˆ¤æ–­å’Œæ¯”ç‰Œç®—æ³•
   - ç­¹ç æ± ç®¡ç†ï¼ˆä¸»æ± ã€è¾¹æ± ï¼‰
   - æ¸¸æˆçŠ¶æ€ç®¡ç†

5. **å‰ç«¯UI** âœ… (100%)
   - æ¸¸æˆæ¡Œé¢ç»„ä»¶
   - æ“ä½œé¢æ¿å’Œäº¤äº’
   - ç»“ç®—å’ŒåŠ¨ç”»æ•ˆæœ
   - å“åº”å¼è®¾è®¡

6. **WebSocketå®æ—¶é€šä¿¡** âœ… (100%)
   - Socket.IOæœåŠ¡ç«¯å®ç°
   - å®¢æˆ·ç«¯å®æ—¶é€šä¿¡é›†æˆ
   - æ¸¸æˆäº‹ä»¶å¹¿æ’­
   - è¿æ¥çŠ¶æ€ç®¡ç†å’Œé‡è¿æœºåˆ¶

### 8.2 å¼€å‘è¿›åº¦ç»Ÿè®¡ ğŸ“ˆ **UPDATED**
- **æ€»ä½“è¿›åº¦**: ~75-80% å®Œæˆ (å¤§å¹…æå‡ï¼ŒåŒ…å«E2Eæµ‹è¯•)
- **ä»£ç è´¨é‡**: 290+ä¸ªæµ‹è¯•ç”¨ä¾‹ (å•å…ƒæµ‹è¯•+E2Eæµ‹è¯•)ï¼Œè¦†ç›–ç‡é«˜
- **æ¶æ„å®Œæ•´æ€§**: æ ¸å¿ƒæ¶æ„å·²å®Œå…¨å®ç°
- **å®æ—¶é€šä¿¡**: WebSocketé›†æˆå®Œæˆ
- **æµ‹è¯•æ¶æ„**: å®Œæ•´çš„E2Eæµ‹è¯•æ¡†æ¶ (Playwright)
- **å¼€å‘ä½“éªŒ**: å¢å¼ºçš„å¼€å‘å·¥ä½œæµç¨‹å’Œè¿›ç¨‹ç®¡ç†
- **å¥åº·ç›‘æ§**: ç‹¬ç«‹çš„å¥åº·æ£€æŸ¥ç³»ç»Ÿ
- **æŠ€æœ¯å€ºåŠ¡**: æä½ï¼Œä»£ç è´¨é‡ä¼˜ç§€

---

## 9. å¾…å®ŒæˆåŠŸèƒ½

### 9.1 å³å°†å®Œæˆçš„ä»»åŠ¡
1. **ç«¯åˆ°ç«¯æµ‹è¯•** (ä»»åŠ¡7.1)
2. **éƒ¨ç½²ä¼˜åŒ–** (ä»»åŠ¡7.2)
3. **æ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§** (ä»»åŠ¡8.1-8.3)
4. **é«˜çº§åŠŸèƒ½æ‰©å±•** (é”¦æ ‡èµ›æ¨¡å¼ã€è§‚æˆ˜åŠŸèƒ½ç­‰)

### 9.2 æŠ€æœ¯ç‰¹ç‚¹æ€»ç»“
- **ç±»å‹å®‰å…¨**: å…¨é¢ä½¿ç”¨TypeScript
- **æµ‹è¯•é©±åŠ¨**: é«˜æµ‹è¯•è¦†ç›–ç‡
- **æ¨¡å—åŒ–**: æ¸…æ™°çš„ä»£ç ç»„ç»‡ç»“æ„
- **ç°ä»£åŒ–**: ä½¿ç”¨æœ€æ–°çš„æŠ€æœ¯æ ˆ
- **å¯æ‰©å±•**: æ”¯æŒå¤šäººå®æ—¶å¯¹æˆ˜
- **å“åº”å¼**: æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯

---

## 10. æ¶æ„ä¼˜åŠ¿

1. **é«˜åº¦æ¨¡å—åŒ–**: å‰åç«¯åˆ†ç¦»ï¼Œç»„ä»¶åŒ–å¼€å‘
2. **ç±»å‹å®‰å…¨**: å…¨é¢TypeScriptæ”¯æŒï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
3. **æµ‹è¯•å®Œå–„**: å•å…ƒæµ‹è¯•è¦†ç›–ç‡é«˜ï¼Œè´¨é‡å¯é 
4. **æ€§èƒ½ä¼˜åŒ–**: Redisç¼“å­˜ï¼Œæ•°æ®åº“ç´¢å¼•ä¼˜åŒ–
5. **ç”¨æˆ·ä½“éªŒ**: å“åº”å¼è®¾è®¡ï¼Œå®æ—¶æ›´æ–°
6. **å¯ç»´æŠ¤æ€§**: æ¸…æ™°çš„ä»£ç ç»“æ„ï¼Œå®Œå–„çš„æ–‡æ¡£
7. **å¯æ‰©å±•æ€§**: æ”¯æŒå¤šæˆ¿é—´ã€å¤šäººæ¸¸æˆ
8. **éƒ¨ç½²å‹å¥½**: Dockerå®¹å™¨åŒ–ï¼Œæ˜“äºéƒ¨ç½²

---

## 11. ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    User[ğŸ‘¤ ç”¨æˆ·] --> Frontend[ğŸŒ React Frontend]
    
    Frontend --> |HTTP/REST API| Backend[ğŸš€ Express Backend]
    Frontend --> |WebSocket| Backend
    
    Backend --> |Prisma ORM| PostgreSQL[(ğŸ—„ï¸ PostgreSQL)]
    Backend --> |Cache/Sessions| Redis[(âš¡ Redis)]
    
    Backend --> GameEngine[ğŸ® æ¸¸æˆé€»è¾‘å¼•æ“]
    GameEngine --> Card[ğŸƒ æ‰‘å…‹ç‰Œ]
    GameEngine --> HandRank[ğŸ† ç‰Œå‹åˆ¤æ–­]
    GameEngine --> PotManager[ğŸ’° ç­¹ç æ± ]
    GameEngine --> GameState[ğŸ¯ æ¸¸æˆçŠ¶æ€]
    
    Frontend --> Components[ğŸ§© UIç»„ä»¶]
    Components --> GameTable[ğŸ² æ¸¸æˆæ¡Œé¢]
    Components --> ActionPanel[ğŸ›ï¸ æ“ä½œé¢æ¿]
    Components --> PlayerSeat[ğŸª‘ ç©å®¶åº§ä½]
    
    Backend --> |Docker| Container[ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²]
    Frontend --> |Docker| Container
    PostgreSQL --> |Docker| Container
    Redis --> |Docker| Container
```

---

## 12. æ•°æ®æµæ¶æ„

```mermaid
sequenceDiagram
    participant User as ğŸ‘¤ ç”¨æˆ·
    participant Frontend as ğŸŒ å‰ç«¯
    participant Backend as ğŸš€ åç«¯
    participant Game as ğŸ® æ¸¸æˆå¼•æ“
    participant DB as ğŸ—„ï¸ æ•°æ®åº“
    participant Cache as âš¡ Redis
    
    User->>Frontend: ç™»å½•
    Frontend->>Backend: POST /api/auth/login
    Backend->>DB: éªŒè¯ç”¨æˆ·
    Backend->>Frontend: JWT Token
    
    User->>Frontend: åŠ å…¥æˆ¿é—´
    Frontend->>Backend: POST /api/room/join
    Backend->>Cache: æ›´æ–°æˆ¿é—´çŠ¶æ€
    Backend->>Game: åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€
    
    User->>Frontend: ç©å®¶æ“ä½œ
    Frontend->>Backend: WebSocket æ¶ˆæ¯
    Backend->>Game: æ‰§è¡Œæ¸¸æˆé€»è¾‘
    Game->>Backend: æ›´æ–°æ¸¸æˆçŠ¶æ€
    Backend->>Cache: ç¼“å­˜çŠ¶æ€
    Backend->>Frontend: å¹¿æ’­çŠ¶æ€æ›´æ–°
    Frontend->>User: æ›´æ–°UI
```

è¿™ä¸ªé¡¹ç›®å±•ç°äº†ç°ä»£Webå¼€å‘çš„æœ€ä½³å®è·µï¼Œå…·æœ‰å®Œæ•´çš„æŠ€æœ¯æ¶æ„å’Œé«˜è´¨é‡çš„ä»£ç å®ç°ã€‚

---

*æ–‡æ¡£æœ€åæ›´æ–°: 2025-06-16*  
*é¡¹ç›®è¿›åº¦: ~75-80% å®Œæˆ (å¤§å¹…æå‡)*  
*æµ‹è¯•è¦†ç›–: 290+ä¸ªæµ‹è¯•ç”¨ä¾‹ (å•å…ƒæµ‹è¯•+E2Eæµ‹è¯•)*  
*å®æ—¶é€šä¿¡: WebSocketé›†æˆå®Œæˆ*  
*E2Eæµ‹è¯•: Playwrightæ¡†æ¶å®Œæ•´é›†æˆ*  
*å¼€å‘ä½“éªŒ: å¢å¼ºçš„å·¥ä½œæµç¨‹å’Œç›‘æ§ç³»ç»Ÿ*