# Texas Poker E2E Tests

å¾·å·æ‰‘å…‹æ¸¸æˆçš„ç«¯åˆ°ç«¯æµ‹è¯•å¥—ä»¶ï¼Œä½¿ç”¨ Playwright æ¡†æ¶ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
npm install
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰E2Eæµ‹è¯•
npm test

# è¿è¡Œå¸¦ç•Œé¢çš„æµ‹è¯•ï¼ˆå¯è§†åŒ–è°ƒè¯•ï¼‰
npm run test:headed

# è¿è¡Œäº¤äº’å¼UIæ¨¡å¼
npm run test:ui

# è¿è¡Œè°ƒè¯•æ¨¡å¼
npm run test:debug
```

### é’ˆå¯¹ç‰¹å®šæµè§ˆå™¨è¿è¡Œ

```bash
# ä»…åœ¨Chromiumä¸­è¿è¡Œ
npm run test:chromium

# ä»…åœ¨Firefoxä¸­è¿è¡Œ  
npm run test:firefox

# ä»…åœ¨Webkit/Safariä¸­è¿è¡Œ
npm run test:webkit
```

### æŸ¥çœ‹æµ‹è¯•æŠ¥å‘Š

```bash
npm run report
```

## ğŸ“ ç›®å½•ç»“æ„

```
e2e-tests/
â”œâ”€â”€ package.json              # E2Eæµ‹è¯•ä¾èµ–é…ç½®
â”œâ”€â”€ playwright.config.ts      # Playwrighté…ç½®æ–‡ä»¶
â”œâ”€â”€ tests/                    # æµ‹è¯•æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ auth.spec.ts          # å®Œæ•´çš„è®¤è¯æµç¨‹æµ‹è¯•
â”‚   â””â”€â”€ auth-simplified.spec.ts  # ç®€åŒ–ç‰ˆè®¤è¯æµ‹è¯•
â”œâ”€â”€ playwright-report/        # HTMLæµ‹è¯•æŠ¥å‘Š
â”œâ”€â”€ test-results/            # æµ‹è¯•ç»“æœè¯¦æƒ…
â””â”€â”€ README.md               # æœ¬æ–‡æ¡£
```

## ğŸ§ª æµ‹è¯•ç”¨ä¾‹

### ç”¨æˆ·è®¤è¯æµç¨‹æµ‹è¯•

**æ–‡ä»¶**: `tests/auth-simplified.spec.ts`

- âœ… ç”¨æˆ·æ³¨å†Œæµç¨‹
- âœ… ç™»å½•/æ³¨å†Œæ¨¡å¼åˆ‡æ¢  
- âœ… è¡¨å•æ•°æ®æ¸…ç©ºéªŒè¯
- âœ… è¡¨å•éªŒè¯ï¼ˆå¿…å¡«å­—æ®µï¼‰
- âœ… å¤§å…é¡µé¢åŸºæœ¬åŠŸèƒ½
- âœ… é€€å‡ºç™»å½•åŠŸèƒ½

**æµ‹è¯•è¦†ç›–**:
- å‰åç«¯APIé€šä¿¡
- JWTè®¤è¯æœºåˆ¶
- Reactç»„ä»¶äº¤äº’
- è·¯ç”±è·³è½¬å’Œä¿æŠ¤
- æ•°æ®åº“æ“ä½œéªŒè¯
- ç”¨æˆ·çŠ¶æ€ç®¡ç†

## âš™ï¸ é…ç½®è¯´æ˜

### Playwrighté…ç½® (`playwright.config.ts`)

- **æµ‹è¯•ç›®å½•**: `./tests`
- **åŸºç¡€URL**: `http://localhost:5173` (å‰ç«¯å¼€å‘æœåŠ¡å™¨)
- **å¹¶è¡Œæ‰§è¡Œ**: å¯ç”¨
- **æµè§ˆå™¨æ”¯æŒ**: Chromium, Firefox, Webkit
- **è‡ªåŠ¨å¯åŠ¨**: å‰ç«¯å¼€å‘æœåŠ¡å™¨

### ç¯å¢ƒè¦æ±‚

åœ¨è¿è¡ŒE2Eæµ‹è¯•å‰ï¼Œè¯·ç¡®ä¿ï¼š

1. **åç«¯æœåŠ¡è¿è¡Œä¸­** (http://localhost:3001)
   ```bash
   cd ../backend && npm run dev
   ```

2. **æ•°æ®åº“æœåŠ¡è¿è¡Œä¸­** (PostgreSQL + Redis)
   ```bash
   cd .. && docker-compose up postgres redis
   ```

3. **å‰ç«¯æœåŠ¡ä¼šè‡ªåŠ¨å¯åŠ¨** (é€šè¿‡webServeré…ç½®)

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æµ‹è¯•

1. åœ¨ `tests/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ `.spec.ts` æ–‡ä»¶
2. ä½¿ç”¨Playwrightçš„æµ‹è¯•APIç¼–å†™æµ‹è¯•ç”¨ä¾‹
3. éµå¾ªç°æœ‰çš„æµ‹è¯•ç»“æ„å’Œå‘½åçº¦å®š

### æµ‹è¯•æœ€ä½³å®è·µ

- ä½¿ç”¨é¡µé¢å¯¹è±¡æ¨¡å¼å°è£…å¤æ‚äº¤äº’
- ä¸ºæ¯ä¸ªæµ‹è¯•ç”Ÿæˆå”¯ä¸€çš„æµ‹è¯•æ•°æ®
- ä½¿ç”¨é€‚å½“çš„ç­‰å¾…ç­–ç•¥é¿å…flakyæµ‹è¯•
- æ·»åŠ æ¸…æ™°çš„æµ‹è¯•æè¿°å’Œæ³¨é‡Š

### è°ƒè¯•æµ‹è¯•å¤±è´¥

```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npx playwright test tests/auth-simplified.spec.ts

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
npx playwright test -g "ç”¨æˆ·æ³¨å†Œæµç¨‹"

# å¼€å¯è°ƒè¯•æ¨¡å¼
npm run test:debug
```

## ğŸ“Š æµ‹è¯•ç»“æœ

æœ€è¿‘è¿è¡Œç»“æœï¼š
- **æ€»æµ‹è¯•æ•°**: 6ä¸ª
- **é€šè¿‡ç‡**: 100%
- **æ‰§è¡Œæ—¶é—´**: ~1.4ç§’
- **è¦†ç›–æµè§ˆå™¨**: Chromium

## ğŸ”— ç›¸å…³é“¾æ¥

- [Playwright å®˜æ–¹æ–‡æ¡£](https://playwright.dev/)
- [Texas Poker é¡¹ç›®æ¶æ„æ–‡æ¡£](../codebase_architecture.md)
- [å¼€å‘è®¡åˆ’](../plan.md)